<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>新增菜单</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <div th:replace="comm/page::layui_css"/>
    <link rel="stylesheet" th:href="@{/res/js/lay-module/dtree/dtree.css}">
    <link rel="stylesheet" th:href="@{/res/js/lay-module/dtree/font/dtreefont.css}">
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <div class="layui-fluid">
            <fieldset class="layui-elem-field layui-field-title" id="csk">
                <legend>穿梭框树的简易实现</legend>
                <div class="layui-field-box">
                    <div class="layui-row layui-col-space10" style="margin-top: 10px;background: #f2f2f2">
                        <div class="layui-col-lg5 layui-col-md5">
                            <div class="layui-card">
                                <div class="layui-card-header">左边的树</div>
                                <div class="layui-card-body">
                                    <div style="height: 350px;overflow: auto;">
                                        <ul id="cskTree1" class="dtree" data-id="0"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-lg2 layui-col-md2">
                            <div style="height: 350px;">
                                <button class="layui-btn layui-btn-normal" style="margin-top: 180px;" id="csk_btn">
                                    转移到右边
                                </button>
                            </div>
                        </div>
                        <div class="layui-col-lg5 layui-col-md5">
                            <div class="layui-card">
                                <div class="layui-card-header">右边的树</div>
                                <div class="layui-card-body">
                                    <div style="height: 350px;overflow: auto;">
                                        <ul id="cskTree2" class="dtree" data-id="-1"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</div>

<div th:replace="comm/page::layui_script"/>
<script>
    var index = parent.layer.getFrameIndex(window.name);
    layui.use(['dtree', 'layer', 'jquery'], function () {
        var dtree = layui.dtree
            , layer = layui.layer, $ = layui.jquery;
        dtree.render({
            elem: "#cskTree1",
            url: "/role/auth/data",
            checkbar: true,
            load: false
        });
        dtree.render({
            elem: "#cskTree2",
            data: [],
            checkbar: true,
            response: {treeId: "nodeId", title: "context"},
            dataFormat: "list"
        });
        $("#csk_btn").click(function () {
            var param = dtree.getCheckbarNodesParam("cskTree1");  // 获取选中数据
            if (param.length == 0) {
                layer.msg("请至少选择一个节点");
            }
            dtree.reload("cskTree2", {data: param});
        });
    });
</script>

</body>
</html>